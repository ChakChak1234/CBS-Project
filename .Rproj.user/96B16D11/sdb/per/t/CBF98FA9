{
    "collab_server" : "",
    "contents" : "# Load libraries\nlibrary(plyr)\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(cowplot)\n\n# Load data from csv\nunis_data <- read.csv(file = \"unis.csv\", header = TRUE)\nviews_data <- read.csv(file = \"views.csv\", header = TRUE)\n\n# Remove unnecessary columns\nunis_data <- subset(unis_data, select = -X)\nviews_data <- subset(views_data, select = -X)\n\n# Convert factor into datetime\nunis_data$ft_difftime <- difftime(unis_data$ft_end, unis_data$ft_start, units=\"days\")\n\n# Merge dataframes together \ndata_complete <- join(unis_data, views_data, type = \"inner\") # Completed data only\ndata_full <- join(unis_data, views_data, type = \"full\") # all data\n\n# 1. We have free trials of different lengths. What conclusions can you draw about the success \n# of the various trial lengths? Please evaluate free trial signup counts and any other metrics \n# using any techniques you choose. Do you have enough information to gauge conversion rate from \n# free trial to paid? If so, is there any bias your estimate?\n\n# Preliminary exploratory analyses\ntable(as.numeric(data_complete$ft_difftime))\nboxplot(as.numeric(data_complete$ft_difftime),\n        main = \"Free Trial Duration\", xlab = \"Free Trial\", ylab = \"Duration of Free Trial (in Days)\")\nhist(as.numeric(data_complete$ft_difftime),\n     main = \"Free Trial Duration\", xlab = \"Length of Free Trial (in Days)\", ylab = \"Frequency of Free Trial\")\nsummary(as.numeric(data_complete$ft_difftime))\n\n# Divide complete data by total data\nlength(data_complete$tve_user_id)/length(data_full$tve_user_id)\n\n# Convert difftime to numeric\ndata_complete$ft_difftime <- as.numeric(data_complete$ft_difftime)\n\n# Proportion of success from 7-day trial\nsum(data_complete$ft_difftime <= 7 )/length(data_complete$tve_user_id)\n\n# Proportion of sucess from 30-day trial\nsum(data_complete$ft_difftime >= 29 & data_complete$ft_difftime <= 30)/length(data_complete$tve_user_id)\n\n# 7 day and 30 day trials appear to have the highest conversion rate (5.6%), with the average trial length\n# being 18 days and the median trial length being 7 days. However, there's not enough information\n# to gauge an unbiased conversion rate from free trial to paid simply to due the large portion of\n# missing data. I arrived at this conclusion by dividing the IDs with complete information by\n# the complete number of IDs. I attempted to partition whether the view event came before the trial\n# period (vice versa) by looking at the dates, but it wasn't a completely viable solution.\n\n# 2. From time to time we have signup events. Please flag any abnormal signup activity and use \n# the internet to try and identify any drivers.\n\n# Convert column from factor to date variable\ndata_complete$signup_date <- as.Date(data_complete$ft_start)\n\n# Plot graph and store into object for later use\nplot_1 <- ggplot(data_complete, aes(x=signup_date)) + geom_histogram(binwidth=30, colour=\"white\") +\n  scale_x_date(labels = date_format(\"%Y-%b-%d\"),\n               breaks = seq(min(data_complete$signup_date)-5, max(data_complete$signup_date)+5, 30),\n               limits = c(as.Date(\"2017-01-01\"), as.Date(\"2017-09-18\"))) +\n  ylab(\"Frequency\") + xlab(\"Year and Month\") + ggtitle(\"Sign-Up Date\") +\n  theme_bw() + theme(axis.text.x = element_text(angle = 90, hjust = 1))\n\n# Assuming free trial start date is the signup date, a histogram was used to see the monthly frequency\n# of signups. The histogram result indicates that, on average, there's about 5000 sign ups, though\n# signups increased 5-fold in the month of May, and then a sharp then gradual decrease back to the\n# normal monthly signup of 5000 subscribers. Internet research suggests that amazon prime during\n# and before May, 2017 introduced two interesting features that may or may not have caused the spike\n# in subscribers: CBS-All Access Showtime without ads; and the Amazon Prime Channel now functions\n# as a TV channel. These two products could have most likely precipated increased viewership.\n\n# 3. Is there any seasonality in signup and viewing events?\n\n# Convert column\ndata_complete$view_date <- as.Date(data_complete$dt)\n\n# Plot graph and store into object for later use\nplot_2 <- ggplot(data_complete, aes(x=view_date)) + geom_histogram(binwidth=30, colour=\"white\") +\n  scale_x_date(labels = date_format(\"%Y-%b-%d\"),\n               breaks = seq(min(data_complete$view_date)-5, max(data_complete$view_date)+5, 30),\n               limits = c(as.Date(\"2017-01-01\"), as.Date(\"2017-09-18\"))) +\n  ylab(\"Frequency\") + xlab(\"Year and Month\") + ggtitle(\"Viewing Date\") +\n  theme_bw() + theme(axis.text.x = element_text(angle = 90, hjust = 1))\n\n# Plot signup and viewing events for seasonality\nplot_grid(plot_1, plot_2, align = \"v\", nrow = 2, rel_heights = c(1/2, 1/2))\n\n# Viewing signup and viewing event plots indicates an interesting trend. Before May, 2017 each month\n# suggests there's about 5000 subscribes signing up and viewing events. During and after May, there's\n# a huge spike of subscribers, though there's drastically more people signing up than viewing. It should\n# , however, be noted that the dataset with user IDs in signup and viewing were used, not the completed\n# dataset.\n\n# 4. Can you draw any insights into viewing behavior?\ndata_complete$title_id <- as.factor(data_complete$title_id)\n\n# Histogram of viewing behavior (by minute)\nplot_3 <- ggplot(data=data_complete, aes(x=seconds/60)) + geom_histogram() +\n  ylab(\"Frequency\") + xlab(\"By Minute\") + ggtitle(\"When Users Ended Episode\") \nplot_4 <- ggplot(data=data_complete, aes(x=runtime/60)) + geom_histogram() +\n  ylab(\"Frequency\") + xlab(\"By Minute\") + ggtitle(\"Episode Duration\")\n\n# Summary of viewing behavior (by minute)\nsummary(data_complete$seconds/60)\nsummary(data_complete$runtime/60)\n\n# Exploratory Analysis\n# Correlation between seconds and runtime, regardless of viewing date and title_id\nplot_5 <- ggplot(data_complete, aes(x=seconds, y=runtime)) + geom_point(size=1, shape=21, fill=\"white\") + \n  xlab(\"Seconds\") + ylab(\"Runtime\") + ggtitle(\"Seconds vs Runtime\") \n# correlation test\ncor.test(data_complete$seconds, data_complete$runtime)\n\nplot_grid(plot_3, plot_4, plot_5, align = \"v\", nrow = 2, rel_heights = c(1/2, 1/2))\n\n# The average view of each title is about 60 minutes, regardless of how long each episode. The distribution\n# of runtime is normally distributed, which makes sense, while the actual viewing of each episode is\n# positvely skewed, indicating that most people stop watching the episode before it ends. A scatterplot\n# was visualized to explore possible relationship between when the subscriber stopped watching the title\n# and the title's length. Results indicate a positive correlation (r = 0.413) between the two variables,\n# though it should be cautioned that runtime is always greater than when the episode stopped, as previously\n# suggested.\n\n",
    "created" : 1506734364669.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "687845744",
    "id" : "CBF98FA9",
    "lastKnownWriteTime" : 1506921656,
    "last_content_update" : 1506921656150,
    "path" : "C:/Users/chakw/OneDrive/Documents/Github/CBS Project/Coding.R",
    "project_path" : "Coding.R",
    "properties" : {
        "notebook_format" : "pdf_document",
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}